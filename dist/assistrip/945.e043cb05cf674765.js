"use strict";(self.webpackChunkassistrip=self.webpackChunkassistrip||[]).push([[945],{9945:(B,p,r)=>{r.r(p),r.d(p,{MarketingModule:()=>J});var m=r(6814),u=r(228),Z=r(9160);function h(i,a,e,o,n,s,l){try{var d=i[s](l),g=d.value}catch(f){return void e(f)}d.done?a(g):Promise.resolve(g).then(o,n)}r(2001),r(5220);var t=r(4769),c=r(6223),v=r(6306),w=r(553),x=r(9862);let M=(()=>{class i{constructor(e){this.http=e,this.apiUrl=w.N.apiNotificationsService+"/notifications"}postNotification(e,o,n=null){return this.http.post(this.apiUrl,{title:e,content:o,fileUrl:n}).pipe((0,v.K)(s=>{throw console.log(s),new Error(s)}))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(x.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var b=r(3519),y=r.n(b),O=r(6593),P=r(7398);let C=(()=>{class i{constructor(e){this.http=e,this.apiUrl=w.N.apiNotificationsService+"/images"}postNotification(e){return this.http.post(this.apiUrl,e).pipe((0,P.U)(o=>o.imgUrl),(0,v.K)(o=>{throw console.log(o),new Error(o)}))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(x.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var U=r(4664),T=r(6966);function S(i,a){if(1&i&&(t.TgZ(0,"div",16),t._UZ(1,"img",17),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("src",e.preview,t.LSH)}}function F(i,a){1&i&&(t.TgZ(0,"div",18),t.O4$(),t.TgZ(1,"svg",19),t._UZ(2,"path",20),t.qZA(),t.kcU(),t.TgZ(3,"p"),t._uU(4," Puede agregar una imagen (opcional) "),t.qZA()())}const z=[{path:"marketing",component:Z.o,children:[{path:"notificaciones",component:(()=>{class i{constructor(){var e=this;this.notificationService=(0,t.f3M)(M),this.sanitizer=(0,t.f3M)(O.H7),this.imageService=(0,t.f3M)(C),this.isLoading=!1,this.files=[],this.preview=null,this.notificationForm=new c.cw({title:new c.NI(null,[c.kI.required]),body:new c.NI(null,[c.kI.required]),image:new c.NI(null,[])}),this.extractBase64=function(){var o=function N(i){return function(){var a=this,e=arguments;return new Promise(function(o,n){var s=i.apply(a,e);function l(g){h(s,o,n,l,d,"next",g)}function d(g){h(s,o,n,l,d,"throw",g)}l(void 0)})}}(function*(n){return new Promise((s,l)=>{try{const d=window.URL.createObjectURL(n),g=e.sanitizer.bypassSecurityTrustResourceUrl(d),f=new FileReader;f.readAsDataURL(n),f.onload=()=>{s({base:f.result})},f.onerror=R=>{s({blob:n,image:g})}}catch{console.log("error on image Upload")}})});return function(n){return o.apply(this,arguments)}}()}submitForm(){try{this.isLoading=!0;let e=null;const{title:o,body:n}=this.notificationForm.value;if(this.files.length>0){console.log("Hay archivos");const s=new FormData;this.files.forEach(l=>{s.append("image",l)}),this.imageService.postNotification(s).pipe((0,U.w)(l=>(e=l,this.notificationService.postNotification(o,n,e)))).subscribe({error:()=>{this.showError("No se puede realizar")},complete:()=>{this.notificationForm.get("image").setValue(null),this.notificationForm.get("title").setValue(null),this.notificationForm.get("body").setValue(null),this.files=[],this.preview=null,this.showSuccess(),this.isLoading=!1,e=null}})}else this.notificationService.postNotification(o,n,e).subscribe({error:()=>{this.showError("No se puede realizar")},complete:()=>{this.notificationForm.get("image").setValue(null),this.notificationForm.get("title").setValue(null),this.notificationForm.get("body").setValue(null),this.files=[],this.preview=null,this.showSuccess(),this.isLoading=!1,e=null}})}catch{}}showSuccess(){y().fire({position:"top-end",icon:"success",title:"Notificacion Agregada a Todo el Mundo",showConfirmButton:!1,timer:1500})}showError(e){y().fire({position:"top-end",icon:"error",title:"No se pudo realizar",showConfirmButton:!1,timer:1500})}onFileSelected(e){const o=e.target.files[0];this.files.push(o),this.extractBase64(o).then(n=>{this.preview=n.base}),this.notificationForm.get("image").setValue(o)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],decls:32,vars:4,consts:[[1,"container",3,"formGroup","ngSubmit"],[1,"list"],[1,"grid-columns"],[1,"left"],[1,"field"],["type","text","formControlName","title","name","title","placeholder","Titulo"],["formControlName","body","placeholder","Contendio","name","body","id","","cols","100","rows","10"],[1,"right"],["type","file","formControlName","image","name","image",3,"change"],["class","preview-image",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"actions"],[1,"buttons"],["type","submit",1,"emitir","active"],[1,"loading-container",2,"display","flex","flex-direction","row","align-items","center","justify-content","center"],[3,"loading"],[1,"preview-image"],["alt","",3,"src"],[1,"image-space"],["xmlns","http://www.w3.org/2000/svg","height","48","viewBox","0 96 960 960","width","48"],["d","M92 936q-9 0-15.652-4.125Q69.696 927.75 66 921q-4.167-6.6-4.583-14.3Q61 899 66 891l388-670q5-8 11.5-11.5T480 206q8 0 14.5 3.5T506 221l388 670q5 8 4.583 15.7-.416 7.7-4.583 14.3-3.696 6.75-10.348 10.875Q877 936 868 936H92Zm392.175-117q12.825 0 21.325-8.675 8.5-8.676 8.5-21.5 0-12.825-8.675-21.325-8.676-8.5-21.5-8.5-12.825 0-21.325 8.675-8.5 8.676-8.5 21.5 0 12.825 8.675 21.325 8.676 8.5 21.5 8.5Zm0-111q12.825 0 21.325-8.625T514 678V514q0-12.75-8.675-21.375-8.676-8.625-21.5-8.625-12.825 0-21.325 8.625T454 514v164q0 12.75 8.675 21.375 8.676 8.625 21.5 8.625Z"]],template:function(e,o){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submitForm()}),t.TgZ(1,"div",1)(2,"h2"),t._uU(3,"Agregar Notificacion"),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"div",2)(6,"div",3)(7,"div",4)(8,"label"),t._uU(9," Titulo "),t.qZA(),t._UZ(10,"input",5),t.qZA(),t.TgZ(11,"div",4)(12,"label"),t._uU(13," Contenido "),t.qZA(),t._UZ(14,"textarea",6),t.qZA()(),t.TgZ(15,"div",7)(16,"div",4)(17,"input",8),t.NdJ("change",function(s){return o.onFileSelected(s)}),t.qZA()(),t.TgZ(18,"div",4),t.YNc(19,S,2,1,"div",9),t.YNc(20,F,5,0,"ng-template",null,10,t.W1O),t.qZA()()()(),t.TgZ(22,"div",11)(23,"h2"),t._uU(24,"Acciones"),t.qZA(),t._UZ(25,"hr"),t.TgZ(26,"div",12)(27,"button",13),t._uU(28," Agregar "),t.qZA(),t.TgZ(29,"div",14),t._UZ(30,"loading-process",15),t.qZA()(),t._UZ(31,"hr"),t.qZA()()),2&e){const n=t.MAs(21);t.Q6J("formGroup",o.notificationForm),t.xp6(19),t.Q6J("ngIf",o.preview)("ngIfElse",n),t.xp6(11),t.Q6J("loading",o.isLoading)}},dependencies:[m.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,T.a],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:3fr 1fr;grid-gap:20px;width:100%;top:0;left:0;padding:10px;overflow-y:auto;overflow-x:hidden;animation:aparecerDesdeDerecha .5s ease-out}.list[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]{background-color:var(--body-bg);padding:10px;height:-moz-fit-content;height:fit-content;border-radius:2px;box-shadow:0 0 5px #0003}.grid-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:20px;padding:20px}h2[_ngcontent-%COMP%]{margin:0;padding:0;font-size:1.5rem;font-weight:700;color:var(--text-color)}hr[_ngcontent-%COMP%]{margin:0;padding:0;border:1px solid coral}.field[_ngcontent-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content;padding:20px 10px 0 20px;display:flex;flex-direction:column;align-items:flex-start}label[_ngcontent-%COMP%]{font-size:15px;font-weight:700}input[_ngcontent-%COMP%]{font-size:15px;width:100%;padding:5px;font-family:Lato;margin-top:5px}button[_ngcontent-%COMP%]{width:100%;height:30px;margin:5px;border:none;border-radius:2px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .3s ease-in-out}button.emitir[_ngcontent-%COMP%]{background-color:#e6dfdf;color:var(--text-color);height:-moz-fit-content;height:fit-content;min-height:30px;cursor:not-allowed}button.emitir.active[_ngcontent-%COMP%]{background-color:var(--main-color);border:1px solid var(--main-color);color:#fff;cursor:pointer}textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;font-family:Arial,sans-serif;font-size:16px}.preview-image[_ngcontent-%COMP%]{width:100%;height:300px;border-radius:8px}.preview-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:fill}.image-space[_ngcontent-%COMP%]{width:100%;height:300px;display:flex;flex-direction:column;align-items:center;justify-content:center;border:1px solid var(--main-color);border-radius:8px}.image-space[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--main-color)}.image-space[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;justify-content:center}@media (max-width:900px){.container[_ngcontent-%COMP%], .grid-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}.field[_ngcontent-%COMP%]{width:100%}}"]}),i})()}]}];let I=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.Bz.forChild(z),u.Bz]}),i})();var L=r(1837);let J=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[M,C],imports:[m.ez,I,c.UX,c.u5,L.m]}),i})()}}]);